## 6 修改表

1.添加列  
```
ALTER TABLE products ADD COLUMN description text;

-- 增加约束
ALTER TABLE products ADD COLUMN description CHECK (description <> '')
```

2.删除列
```
ALTER TABLE products DROP COLUMN description;

-- 删除引用列（外键）
ALTER TABLE products DROP COLUMN descrtption CASCADE;
```

3.添加约束
```
ALTER TABLE products ADD CHECK (name <> '');
ALTER TABLE products ADD CONSTRAINT some_name UNIQUE (product_no);
ALTER TABLE products ADD FOREIGN KEY (product_group_id) REFERENCES product_groups;

-- 非空约束
ALTER TABLE products ALTER COLUMN product_no SET NOT NULL;
```

4.删除约束  
```
ALTER TABLE products DROP CONSTRAINT some_name;

-- 非空约束
ALTER TABLE products ALTER COLUMN product_no DROP NOT NULL;
```

5.更改列的默认值  
```
ALTER TABLE products ALTER COLUMN price SET DEFAULT 7.77;

-- 删除默认值
ALTER TABLE procucts ALTER COLUMN price DROP DEFAULT;
```

6.更改列的数据类型
```
ALTER TABLE products ALTER COLUMN price TYPE numeric(10, 2)
```
只有当列中的每个现有条目都可以通过隐式强制类型转换到新类型时，此操作才会成功。如果需要更复杂的转换，可以添加一个USING子句，指定如何根据旧值计算新值。

PostgreSQL会尝试将列的默认值（如果有）以及涉及该列的任何约束转换为新类型。但这些转换可能会失败，或者产生意想不到的结果。通常情况下，最好在更改列类型之前删除所有约束，然后再添加适当修改的约束。

7.重命名列
```
ALTER TABLE products RENAME COLUMN product_no TO product_number
```

8.重命名表
```
ALTER TABLE products RENAME TO items;
```




