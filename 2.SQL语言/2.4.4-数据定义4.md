## 7.特权

创建对象时，会为其分配一个所有者。所有者通常是执行创建语句的角色。对于大多数类型的对象，初始状态是只有所有者（或超级用户）可以对该对象执行任何操作。要允许其他角色使用该对象，必须授予其权限。  

权限类型：SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER, CREATE, CONNECT, TEMPORARY, EXECUTE, USAGE, SET and ALTER SYSTEM. 


修改或销毁对象的权限是对象所有者所固有的，其权限本身不能被授予或撤销。（不过，与所有特权一样，该权限可以被所有者角色的成员继承）  
给表分配新的所有者：
```
ALTER TABLE table_name OWNER TO new_owner
```
超级用户始终可以执行此操作；普通角色只有同时是对象的当前所有者（或拥有角色的成员）和新拥有角色的成员时才能执行此操作。


分配(授予)权限：
```
-- 给角色joe授予更新权限
GRANT UPDATE ON accounts TO joe
```
`ALL`授予所有权限  
权限组用于批量管理用户权限

撤销授予的权限
```
REVOKE ALL ON accounts FROM PUBLIC;
```

## 8.行安全策略（TODO）
除了标准特权，还有行级安全策略，控制每个用户，哪些行可以通过查询返回，或者哪些行可以通过数据修改命令插入、更新或删除。默认情况下，表没有任何策略。

当启用行安全时（使用ALTER TABLE ... ENABLE ROW LEVEL SECURITY），所有常规表访问都需要经过行安全策略。（表的所有者不收行安全策略约束）。如果表不存在任何策略，则使用默认拒绝策略。所有行不可见或无法修改。适用于整个表的操作（例如TRUNCATE和REFERENCES）不受行安全性的约束。

行安全策略可以特定于命令、角色或两者。可以指定一个策略应用于ALL命令、INSERT、UPDATE或DELETE。可以为一个给定策略分配多个角色，并应用常规的角色成员资格和继承规则SELECT。

要根据策略指定哪些行可见或可修改，需要一个返回布尔值的表达式。

表所有者可以选择使用ALTER TABLE ... FORCE ROW LEVEL SECURITYBYPASSRLS来遵守行安全

使用CREATE POLICY命令创建策略，使用ALTER POLICY命令修改策略，使用DROP POLICY命令删除策略。要为给定表启用或禁用行安全性，请使用ALTER TABLE命令。

```
-- 建表
CREATE TABLE accounts (manager text, company text, contact_email text);

-- 开启行安全
ALTER TABLE accounts ENABLE ROW LEVEL SECURITY;

-- 只允许managers角色的成员访问行，并且只允许访问他们accounts的行
CREATE POLICY account_managers ON accounts TO managers
    USING (manager = current_user);
```

## 9.模式
数据库包含一个或多个命名模式，而模式又包含表。模式还包含其他类型的命名对象，包括数据类型、函数和运算符。相同的对象名称可以在不同的模式中使用而不会发生冲突；例如，`schema1` 和 `myschema` 都可以包含名为`mytable`的表。与数据库不同，模式并非严格区分：如果用户有权限，他们可以访问其所连接的数据库中任何模式中的对象。

人们可能想要使用模式的原因有以下几个：

+ 允许多个用户使用一个数据库而不会互相干扰。

+ 将数据库对象组织成逻辑组，以使其更易于管理。

+ 第三方应用程序可以放入单独的模式中，这样它们就不会与其他对象的名称冲突。

# 10 继承
```
CREATE TABLE cities(
    name    text,
    population  float,
    evevalation int - in feet
);

CRATE TABLE capitals(
    state char(2)
)INHERITES(cities)
```

在这种情况下，该capitals表继承了其父表的所有列。cities州首府还具有一个额外的列，state用于显示其所在州。

